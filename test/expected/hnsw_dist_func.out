---------------------------------------------------------------------
-- Test the distance functions used by the HNSW index
---------------------------------------------------------------------
\ir utils/small_world_array.sql
CREATE TABLE small_world (
    id SERIAL,
    b BOOLEAN,
    v REAL[2]
);
INSERT INTO small_world (b, v) VALUES
    (TRUE, '{1,1}'),
    (TRUE, '{3,3}'),
    (TRUE, '{2,2}'),
    (TRUE, '{4,4}'),
    (TRUE, '{1,9}');
CREATE TABLE small_world_l2 (id VARCHAR(3), v REAL[]);
CREATE TABLE small_world_cos (id VARCHAR(3), v REAL[]);
CREATE TABLE small_world_ham (id VARCHAR(3), v INTEGER[]);
CREATE INDEX ON small_world_l2 USING hnsw (v dist_l2sq_ops) WITH (dims=2);
INFO:  done init usearch index
INFO:  inserted 0 elements
INFO:  done saving 0 vectors
CREATE INDEX ON small_world_cos USING hnsw (v dist_cos_ops) WITH (dims=2);
INFO:  done init usearch index
INFO:  inserted 0 elements
INFO:  done saving 0 vectors
CREATE INDEX ON small_world_ham USING hnsw (v dist_hamming_ops) WITH (dims=2);
INFO:  done init usearch index
INFO:  inserted 0 elements
INFO:  done saving 0 vectors
INSERT INTO small_world_l2 SELECT id, v FROM small_world;
INSERT INTO small_world_cos SELECT id, v FROM small_world;
INSERT INTO small_world_ham SELECT id, v FROM small_world;
server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.
connection to server was lost
